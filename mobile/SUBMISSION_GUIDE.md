# ProficiencyAI Mobile App Submission Guide

Complete guide for building and submitting the ProficiencyAI mobile app to Apple App Store and Google Play Store using Expo Application Services (EAS).

---

## Table of Contents

1. [Prerequisites](#prerequisites)
2. [Initial Setup](#initial-setup)
3. [Building with EAS](#building-with-eas)
4. [iOS Submission Workflow](#ios-submission-workflow)
5. [Android Submission Workflow](#android-submission-workflow)
6. [Testing Checklist](#testing-checklist)
7. [Common Issues & Troubleshooting](#common-issues--troubleshooting)
8. [Review Timeline Expectations](#review-timeline-expectations)

---

## Prerequisites

### Required Accounts

1. **Expo Account**
   - Sign up at [expo.dev](https://expo.dev)
   - Free account is sufficient for building
   - Required for EAS Build and EAS Submit

2. **Apple Developer Account** ($99/year)
   - Enroll at [developer.apple.com](https://developer.apple.com/programs/)
   - Individual or Organization account
   - Allow 24-48 hours for approval
   - Required for iOS app submission

3. **Google Play Console Account** ($25 one-time fee)
   - Register at [play.google.com/console](https://play.google.com/console)
   - Organization account recommended
   - Instant approval in most cases
   - Required for Android app submission

### Required Tools

1. **Node.js** (v18 or higher)
   ```bash
   node --version  # Should be v18.0.0 or higher
   ```

2. **EAS CLI**
   ```bash
   npm install -g eas-cli
   eas --version
   ```

3. **Expo CLI** (optional, for local development)
   ```bash
   npm install -g expo-cli
   ```

4. **Git** (for version control)
   ```bash
   git --version
   ```

### Required Certificates & Keys

**For iOS:**
- Distribution Certificate (automatically handled by EAS)
- Provisioning Profiles (automatically handled by EAS)
- App Store Connect API Key (optional, for automation)

**For Android:**
- Upload Key (automatically generated by EAS)
- Google Play Service Account JSON (for automated submission)

---

## Initial Setup

### 1. Install Dependencies

Navigate to the mobile directory and install all required packages:

```bash
cd mobile
npx expo install
```

This installs all dependencies listed in `package.json`.

### 2. Authenticate with EAS

```bash
eas login
```

Enter your Expo account credentials. Your session will be saved locally.

### 3. Configure EAS Build

If not already configured, initialize EAS:

```bash
eas build:configure
```

This creates or updates `eas.json` with build profiles. Our project already has this configured.

### 4. Update Project ID

In `app.json`, update the EAS project ID:

```json
{
  "expo": {
    "extra": {
      "eas": {
        "projectId": "your-actual-project-id-here"
      }
    }
  }
}
```

Get your project ID from the Expo dashboard or by running:

```bash
eas project:info
```

### 5. Verify Configuration

Check that your configuration is correct:

```bash
eas config
```

This displays all build profiles and their settings.

---

## Building with EAS

### Development Builds

For internal testing with development features:

```bash
# iOS Simulator build
eas build --platform ios --profile development

# Android APK for physical devices
eas build --platform android --profile development
```

### Preview Builds

For beta testing with production-like features:

```bash
# iOS (requires provisioning profile)
eas build --platform ios --profile preview

# Android APK
eas build --platform android --profile preview
```

### Production Builds

For app store submission:

```bash
# iOS (creates .ipa file for App Store)
eas build --platform ios --profile production

# Android (creates .aab file for Play Store)
eas build --platform android --profile production
```

### Building Both Platforms Simultaneously

```bash
eas build --platform all --profile production
```

### Build Process

1. **Command execution**: EAS CLI validates configuration
2. **Code upload**: Source code uploaded to EAS servers
3. **Cloud build**: Build runs on EAS infrastructure (15-30 minutes)
4. **Artifact download**: `.ipa` (iOS) or `.aab` (Android) available for download
5. **Notification**: Email sent when build completes

### Monitoring Builds

View build status:
```bash
eas build:list
```

View specific build:
```bash
eas build:view [build-id]
```

Cancel a build:
```bash
eas build:cancel [build-id]
```

---

## iOS Submission Workflow

### Phase 1: TestFlight Beta Testing

#### Step 1: Build for iOS

```bash
eas build --platform ios --profile production
```

Wait for build to complete (15-30 minutes). Download the `.ipa` file or note the build ID.

#### Step 2: Submit to TestFlight

**Option A: Automatic Submission (Recommended)**

```bash
eas submit --platform ios
```

EAS will:
- Select the most recent production build
- Upload to App Store Connect
- Submit for processing

**Option B: Manual Submission via Transporter**

1. Download the `.ipa` file from EAS dashboard
2. Open **Transporter** app (Mac only)
3. Drag and drop the `.ipa` file
4. Click "Deliver"

#### Step 3: Configure TestFlight

1. Log in to [App Store Connect](https://appstoreconnect.apple.com)
2. Navigate to **My Apps** → **ProficiencyAI**
3. Go to **TestFlight** tab
4. Wait for build to finish processing (5-15 minutes)
5. Add **Test Information**:
   - What to test
   - Beta App Description
   - Feedback Email
   - Marketing URL
6. Add **Internal Testers** (up to 100, no review required)
7. Add **External Testers** (requires Beta App Review, 1-2 days)

#### Step 4: Internal Testing

- Invite internal testers via email
- Testers install TestFlight app from App Store
- Testers accept invitation and install build
- Collect feedback and crash reports
- Iterate and submit new builds as needed

#### Step 5: External Testing (Optional)

- Submit build for **Beta App Review** (1-2 business days)
- Add external testers (up to 10,000)
- Testers install via TestFlight
- Collect feedback from broader audience

### Phase 2: App Store Production Release

#### Step 1: Prepare App Store Listing

In App Store Connect:

1. **App Information**
   - Name: ProficiencyAI
   - Subtitle: AI-Powered Assessment Platform
   - Category: Education, Productivity
   - Content Rights: Check if you own rights

2. **Pricing and Availability**
   - Price: Free
   - Availability: All territories (or select specific)
   - Pre-order: Optional

3. **App Privacy**
   - Complete privacy questionnaire
   - Reference `app-store-metadata.md` for data types
   - Submit privacy nutrition label

4. **Version Information** (for v1.0.0)
   - Screenshots: Upload required sizes (see ICON_SPECIFICATIONS.md)
   - Promotional Text: First 170 characters from metadata
   - Description: Copy from `app-store-metadata.md`
   - Keywords: Education,exam,quiz,test,ai,proctoring...
   - Support URL: https://help.proficiencyai.com
   - Marketing URL: https://proficiencyai.com
   - Version: 1.0.0
   - Copyright: © 2025 ProficiencyAI. All rights reserved.

5. **Build Selection**
   - Click **+ (plus icon)** next to Build
   - Select your TestFlight build
   - Answer Export Compliance questions:
     - Uses encryption: Yes
     - Exempt from regulations: Yes (standard HTTPS)

6. **App Review Information**
   - Contact: Your name and phone
   - Demo Account: Create test credentials
     - Username: testuser@proficiencyai.com
     - Password: TestPassword123!
   - Notes: Explain proctoring features require camera/mic

7. **Version Release**
   - Automatic release after approval (recommended)
   - Or: Manual release (you control timing)

#### Step 2: Submit for Review

1. Click **Add for Review** (top right)
2. Answer questionnaire:
   - Advertising Identifier: No
   - Content Rights: Yes
   - Government Export: Standard encryption
3. Click **Submit for Review**

#### Step 3: App Review Process

**Timeline**: 1-3 business days (sometimes 24 hours)

**Statuses**:
- **Waiting for Review**: In queue
- **In Review**: Under active review (1-24 hours)
- **Pending Developer Release**: Approved, awaiting your release
- **Ready for Sale**: Live on App Store!

**Possible Outcomes**:
- **Approved**: App goes live automatically (or awaits manual release)
- **Rejected**: Review team provides rejection reasons
  - Common reasons: Missing demo account, unclear features, crashes
  - Respond in Resolution Center
  - Fix issues and resubmit

#### Step 4: Post-Approval

Once approved:
- App appears on App Store within 24 hours
- Monitor crash reports in App Store Connect
- Respond to user reviews
- Track analytics (downloads, engagement)

---

## Android Submission Workflow

### Phase 1: Internal Testing

#### Step 1: Build for Android

```bash
eas build --platform android --profile production
```

Wait for build to complete. This creates an `.aab` (Android App Bundle) file.

#### Step 2: Create App in Google Play Console

1. Log in to [Google Play Console](https://play.google.com/console)
2. Click **Create app**
3. Fill in details:
   - App name: ProficiencyAI
   - Default language: English (United States)
   - App or game: App
   - Free or paid: Free
4. Accept declarations and click **Create app**

#### Step 3: Set Up App

Complete the following sections in Google Play Console:

**1. Store Presence → Main Store Listing**
- App name: ProficiencyAI
- Short description: (80 chars from metadata)
- Full description: (4000 chars from `app-store-metadata.md`)
- App icon: 512×512 PNG
- Feature graphic: 1024×500 PNG
- Screenshots: Phone (min 2), 7" tablet (min 1), 10" tablet (min 1)
- Category: Education
- Tags: Education, Productivity
- Email: support@proficiencyai.com
- Privacy policy URL: https://proficiencyai.com/privacy
- Save as draft

**2. Store Presence → Store Settings**
- App category: Education
- Tags: Select relevant tags
- Save

**3. Policy → App Content**

Complete all required questionnaires:

- **Privacy Policy**: https://proficiencyai.com/privacy
- **App Access**: 
  - Requires login: Yes
  - Provide demo credentials
- **Ads**: No ads
- **Content Ratings**:
  - Complete IARC questionnaire
  - Answer honestly (should get "Everyone" rating)
- **Target Audience**: 
  - Age groups: 13+, Teachers, Adults
- **News Apps**: Not a news app
- **COVID-19 Contact Tracing**: No
- **Data Safety**:
  - Collect data: Yes (email, name, photos for exams)
  - Share data: No
  - Data encrypted in transit: Yes
  - Users can request deletion: Yes
  - Reference `app-store-metadata.md` for details
- **Government Apps**: No
- **Financial Features**: No (unless using Stripe)
- **Health**: No health-related features

**4. Release → Production → Countries/Regions**
- Select countries: All or specific markets
- Save

**5. Release → Production → Pricing**
- Free app
- Save

#### Step 4: Submit to Internal Testing

**Option A: Automatic Submission (Recommended)**

First, create service account JSON:
1. Go to Google Play Console → Setup → API access
2. Create service account (or use existing)
3. Grant permissions: Release manager
4. Download JSON key file
5. Save as `google-play-service-account.json` in mobile directory

Then submit:

```bash
eas submit --platform android --track internal
```

**Option B: Manual Upload**

1. Download `.aab` file from EAS dashboard
2. Go to Google Play Console
3. Navigate to **Release → Testing → Internal testing**
4. Click **Create new release**
5. Upload the `.aab` file
6. Add release notes (what's new, what to test)
7. Review and roll out to internal testing

#### Step 5: Configure Internal Testing

1. In **Internal testing** section:
2. Create tester list:
   - Click **Create email list**
   - Add tester emails (up to 100)
3. Save and publish

#### Step 6: Internal Testers Access

1. Testers receive email invitation
2. Testers opt in via link
3. Testers download from Play Store
4. App shows "Internal test" badge
5. Collect feedback and crash reports from Play Console

### Phase 2: Open Testing (Optional)

For broader beta testing:

1. Go to **Release → Testing → Open testing**
2. Create release (same process as internal)
3. Submit for review (1-3 days)
4. Once approved, share opt-in URL publicly
5. Users can join without invitation

### Phase 3: Production Release

#### Step 1: Final Build

Ensure you have a production build:

```bash
eas build --platform android --profile production
```

#### Step 2: Submit to Production

**Option A: Using EAS Submit**

```bash
eas submit --platform android --track production
```

**Option B: Manual Upload**

1. Go to **Release → Production**
2. Click **Create new release**
3. Upload the `.aab` file
4. Add release notes:
   ```
   Initial release of ProficiencyAI!
   
   Features:
   - AI-powered question generation
   - Adaptive testing (CAT)
   - Live proctoring
   - Comprehensive analytics
   - Study aids and learning recommendations
   ```
5. Review release

#### Step 3: Rollout Strategy

Choose rollout percentage:
- **Staged rollout** (recommended): Start with 5-10%, increase gradually
  - Monitor crash rates and reviews
  - Increase to 25% → 50% → 100% over days
- **Full rollout**: 100% immediately (riskier)

#### Step 4: Submit for Review

1. Click **Review release**
2. Review all details
3. Click **Start rollout to Production**
4. Confirm

#### Step 5: Google Play Review Process

**Timeline**: 1-7 days (average 3 days)

**Statuses**:
- **Under review**: Google is reviewing
- **Approved**: Live on Play Store!
- **Rejected**: Issues found, requires fixes

**Possible Outcomes**:
- **Approved**: App goes live
- **Rejected**: Common reasons:
  - Privacy policy issues
  - Missing permissions explanations
  - Crashes or bugs
  - Content policy violations
  - Fix and resubmit

#### Step 6: Post-Release

Once live:
- Monitor **Statistics** for downloads
- Check **Crashes & ANRs** (Application Not Responding)
- Respond to reviews in **Ratings and reviews**
- Update app regularly

---

## Testing Checklist

### Pre-Build Testing

- [ ] All features work on iOS simulator/device
- [ ] All features work on Android emulator/device
- [ ] App runs without crashes for 30+ minutes
- [ ] Camera/microphone permissions work correctly
- [ ] Proctoring features functional
- [ ] Login/logout flow works
- [ ] Network error handling works (test with airplane mode)
- [ ] Deep linking works (proficiencyai://exam/123)
- [ ] Push notifications work
- [ ] Offline mode works and syncs properly
- [ ] All images and assets load correctly
- [ ] App icons display correctly
- [ ] Splash screen appears properly

### Functional Testing

- [ ] **Authentication**
  - Login with valid credentials
  - Login with invalid credentials shows error
  - Logout works
  - Session persistence works
  - Password reset flow (if applicable)

- [ ] **Exam Taking**
  - Can view available exams
  - Can start an exam
  - Questions load and display properly
  - Can answer questions (all types)
  - Can navigate between questions
  - Timer works correctly
  - Can submit exam
  - Results display correctly

- [ ] **Proctoring**
  - Camera initializes properly
  - Face detection works
  - Screen recording works (if applicable)
  - Alerts trigger correctly
  - Recording uploads successfully

- [ ] **Dashboard**
  - Stats display correctly
  - Recent activity shows
  - Navigation to all sections works

- [ ] **Accessibility**
  - Screen reader works (iOS VoiceOver, Android TalkBack)
  - Text size adjustments work
  - Color contrast is readable
  - Touch targets are large enough (48×48px min)

### Device Testing

Test on physical devices:

**iOS**:
- [ ] iPhone SE (small screen)
- [ ] iPhone 14 Pro (standard)
- [ ] iPhone 14 Pro Max (large)
- [ ] iPad (tablet)

**Android**:
- [ ] Small phone (5" screen)
- [ ] Standard phone (6-6.5")
- [ ] Large phone (6.7"+)
- [ ] Tablet (10")

### Performance Testing

- [ ] App launch time < 3 seconds
- [ ] Smooth scrolling (60fps)
- [ ] No memory leaks (monitor in 30-minute session)
- [ ] Images load quickly
- [ ] API requests complete in reasonable time
- [ ] App size < 50MB download

### Compliance Testing

- [ ] Privacy policy linked and accessible
- [ ] Terms of service linked and accessible
- [ ] All permissions have usage descriptions
- [ ] No sensitive data logged to console
- [ ] HTTPS used for all network requests
- [ ] No hardcoded credentials in code
- [ ] User data can be deleted (GDPR compliance)

---

## Common Issues & Troubleshooting

### Build Issues

**Issue**: `eas build` fails with "Invalid credentials"
- **Solution**: Run `eas login` again and ensure you're logged in

**Issue**: iOS build fails with "No matching provisioning profile"
- **Solution**: Let EAS manage credentials automatically:
  ```bash
  eas credentials
  ```
  Then select "Set up new credentials"

**Issue**: Android build fails with "Gradle build failed"
- **Solution**: Check `android/build.gradle` for syntax errors
- Ensure all dependencies are compatible
- Try clearing cache: `cd android && ./gradlew clean`

**Issue**: Build succeeds but app crashes on launch
- **Solution**: Check for missing native dependencies
- Run `npx expo install --check` to fix dependency versions
- Check build logs for warnings

### Submission Issues

**Issue**: iOS submission rejected for "Missing Usage Descriptions"
- **Solution**: Add all required permissions to `app.json`:
  ```json
  "infoPlist": {
    "NSCameraUsageDescription": "Required for proctoring",
    "NSMicrophoneUsageDescription": "Required for proctoring"
  }
  ```

**Issue**: Android rejected for "Privacy Policy not accessible"
- **Solution**: Ensure privacy policy URL is HTTPS and publicly accessible
- Test URL in incognito browser

**Issue**: App rejected for "Crashes on launch"
- **Solution**: Test on physical device before submission
- Check crash logs in App Store Connect / Play Console
- Fix crash and resubmit

**Issue**: "Export compliance required" for iOS
- **Solution**: Answer honestly about encryption use
- For standard HTTPS, select "Yes, uses encryption" but "Exempt"
- Add to `app.json`:
  ```json
  "ios": {
    "config": {
      "usesNonExemptEncryption": false
    }
  }
  ```

**Issue**: TestFlight build stuck "Processing"
- **Solution**: Usually resolves in 15 minutes
- If stuck >1 hour, upload may have failed
- Try resubmitting with `eas submit --platform ios`

### App Review Rejections

**iOS Common Rejections**:

1. **Guideline 2.1 - App Completeness**
   - Cause: App crashes, missing features, or demo account doesn't work
   - Fix: Test thoroughly, provide working demo credentials

2. **Guideline 4.0 - Design**
   - Cause: UI/UX issues, placeholder content
   - Fix: Polish UI, remove Lorem Ipsum text

3. **Guideline 5.1.1 - Privacy**
   - Cause: Collecting data without permission
   - Fix: Add permission requests, update privacy policy

**Android Common Rejections**:

1. **Permissions**
   - Cause: Requesting unnecessary permissions
   - Fix: Only request permissions actually used

2. **Privacy Policy**
   - Cause: Policy doesn't match data collection
   - Fix: Update policy to accurately reflect data usage

3. **Content Rating**
   - Cause: Incorrect IARC responses
   - Fix: Re-complete questionnaire accurately

### Runtime Issues

**Issue**: Camera not working on iOS
- **Solution**: Ensure permission in `app.json` and request permission in code
- Check Settings → ProficiencyAI → Camera is enabled

**Issue**: Push notifications not received
- **Solution**: 
  - Verify device token is registered
  - Check notification permissions are granted
  - Test with Expo push notification tool

**Issue**: Deep linking not working
- **Solution**: Verify scheme in `app.json` matches
- Test with: `xcrun simctl openurl booted proficiencyai://exam/123`
- Ensure associated domains are configured

---

## Review Timeline Expectations

### Apple App Store

| Stage | Typical Timeline | Notes |
|-------|------------------|-------|
| **Build Processing** | 5-15 minutes | After upload to TestFlight |
| **Beta App Review** | 1-2 business days | For external TestFlight |
| **App Review** | 24 hours - 3 days | Usually 1-2 days |
| **Expedited Review** | 1-24 hours | Available for critical bugs |
| **Resubmission** | 24 hours - 2 days | Faster if only minor fixes |

**Peak Times**: Avoid submitting Friday afternoon (longer weekend wait)

**Expedited Review**: Available for critical bugs affecting live users
- Request via App Store Connect
- Explain urgency and impact
- Limited to 2-3 per year

### Google Play Store

| Stage | Typical Timeline | Notes |
|-------|------------------|-------|
| **Build Processing** | 1-5 minutes | After upload |
| **Internal Testing** | Instant | No review required |
| **Open Testing** | 1-3 days | Requires review |
| **Production Review** | 1-7 days | Average 3 days, can be longer |
| **Update Review** | 1-3 days | Usually faster than initial |

**First App**: May take longer (up to 7 days)

**Updates**: Faster review for existing apps

**Priority Review**: Not available (unlike iOS)

### General Tips

1. **Submit Early**: Don't wait until deadline
2. **Test Thoroughly**: Rejections reset the clock
3. **Provide Details**: Clear release notes help reviewers
4. **Monitor Status**: Check daily for updates
5. **Respond Quickly**: If rejected, fix and resubmit ASAP
6. **Plan for Delays**: Build in buffer time for unexpected issues

### Holiday Schedules

Both stores have slower reviews during:
- Thanksgiving week (US)
- Christmas week (Dec 24-31)
- New Year's week (Jan 1-7)
- Chinese New Year (if targeting Asia)

Plan submissions accordingly!

---

## Next Steps After Approval

1. **Monitor Analytics**
   - App Store Connect Analytics
   - Google Play Console Statistics
   - Track downloads, engagement, crashes

2. **Respond to Reviews**
   - Reply to user reviews within 24-48 hours
   - Address concerns publicly
   - Encourage positive reviews

3. **Plan Updates**
   - Fix bugs reported by users
   - Add requested features
   - Maintain regular update schedule (monthly recommended)

4. **Marketing**
   - Announce launch on social media
   - Email existing web users
   - App Store Optimization (ASO)
   - Consider App Store ads

5. **Continuous Improvement**
   - Monitor crash reports daily
   - A/B test features
   - Gather user feedback
   - Iterate based on data

---

## Support Resources

- **Expo Documentation**: https://docs.expo.dev
- **EAS Build Docs**: https://docs.expo.dev/build/introduction/
- **EAS Submit Docs**: https://docs.expo.dev/submit/introduction/
- **Apple Developer Forums**: https://developer.apple.com/forums/
- **Google Play Console Help**: https://support.google.com/googleplay/android-developer
- **Expo Discord**: https://chat.expo.dev
- **Stack Overflow**: Tag questions with `expo`, `eas`, `react-native`

---

**Document Version**: 1.0.0  
**Last Updated**: November 2025  
**Maintained By**: ProficiencyAI Development Team
